!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("core-js/modules/es6.object.assign.js"),require("core-js/modules/es6.object.to-string.js"),require("core-js/modules/es6.array.slice.js")):"function"==typeof define&&define.amd?define(["exports","core-js/modules/es6.object.assign.js","core-js/modules/es6.object.to-string.js","core-js/modules/es6.array.slice.js"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).textEllipsis={})}(this,(function(e){"use strict";var t={lineNum:1,fontFamily:"MicrosoftYahei",fontWeight:"normal",fontSize:"14px",left:"...",tagName:"p",resize:!0},n=function(e){return"[object NodeList]"===Object.prototype.toString.call(e)},i=function(e){return"[object HTMLDivElement]"===Object.prototype.toString.call(e)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.innerText=t.value,e.offsetWidth+.5},r=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=0,r="",s=n.length-1;s>0;s--){r=n.slice(s);var a=o(t,Object.assign({value:r},e)),l=o(t,Object.assign({value:e.left},e));if(a>l){i=s;break}}return i-1},s=function(e){!function(e){if(null===e.getAttribute("text"))throw new Error("The text missed!")}(e);var n=function(e){var n=Object.assign({},t);return n.text=e.getAttribute("text"),n.left=e.getAttribute("left")||n.left,n.tagName=e.getAttribute("tagName")||n.tagName,n.lineNum=e.getAttribute("lineNum")||n.lineNum,n.fontFamily=e.getAttribute("fontFamily")||getComputedStyle(e)["font-family"]||n.fontFamily,n.fontSize=e.getAttribute("fontSize")||getComputedStyle(e)["font-size"]||n.fontSize,n.fontWeight=e.getAttribute("fontWeight")||getComputedStyle(e)["font-weight"]||n.fontWeight,n.width=e.getAttribute("width")||getComputedStyle(e.parentElement).width,n.resize=e.getAttribute("resize")||n.resize,n}(e),i=function(e){var t=document.createElement("span");return t.style.opacity=1,t.style["white-space"]="nowrap",t.style["font-weight"]=e.fontWeight,t.style["font-family"]=e.fontFamily,t.style["font-size"]=e.fontSize,document.body.append(t),t}(n),s=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=1,i=0,s=[],a=0;a<=e.text.length&&!(n>e.lineNum);a++){var l=n===parseInt(e.lineNum,10)?e.left:"",u=e.text.substr(i,a-i),f=o(t,Object.assign({value:u},e));if(n===parseInt(e.lineNum,10)&&f>=parseFloat(e.width,10)){var c=r(e,t,u);u=u.substring(0,c),u+=l,f=o(t,Object.assign({value:u},e))}f<=parseFloat(e.width,10)?s[n-1]=u:(n++,i=--a)}return s}(n,i);return function(e,t,n){for(var i=document.createElement("div"),o=0;o<t.length;o++){var r=document.createElement(n.tagName);r.innerText=t[o],i.appendChild(r)}e.innerHTML=i.innerHTML}(e,s,n),function(e){e.remove()}(i),n},a=function(e){var t=s(e);!0!==t.resize&&"true"!==t.resize||window.addEventListener("resize",(function(){s(e)}))},l={config:function(e){Object.assign(t,e)},init:function(e){if(n(e))for(var t=0;t<e.length;t++)a(e[t]);else{if(!i(e))throw new Error("The ".concat(e," is not a HTMLElement"));a(e)}},watch:function(e){var t=[];if(n(e))for(var o=0;o<e.length;o++)t.push(e[o]);else{if(!i(e))throw new Error("The ".concat(e," is not a HTMLElement"));t.push(e)}for(var r=function(e){a(t[e]);var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(n){new n((function(){a(t[e])})).observe(t[e],{attributes:!0})}else t[e].addEventListener("DOMAttrModified",(function(){a(t[e])}))},s=0;s<t.length;s++)r(s)}};e.ellipsis=l,Object.defineProperty(e,"__esModule",{value:!0})}));
